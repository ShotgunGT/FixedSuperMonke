all credit goes to bjrsinge i just compiled his fix of the code
